import json as js
import math
import random
import numpy as np


# config parameters
def generate():
    # arms = [5000]  # how many arms we have
    arms = [100,1000]
    for num_restaurant in arms:
        for v in range(1):
            normal_ratio = 1
            file_path = "./testfiles/trans_config_" + str(num_restaurant) + "_V" + str(v) + ".npy"
            file_path2 = "./testfiles/times_config_" + str(num_restaurant) + "_V" + str(v) + ".npy"
            no_action_range1 = [0.8, 0.9]
            no_action_range2 = [0.1, 0.2]
            action_range1 = [0.98, 1]
            action_range2 = [0.95, 1]

            # no_action_range1 = [0, 1]
            # no_action_range2 = [0, 1]
            # action_range1 = [0, 1]
            # action_range2 = [0, 1]

            inspect_times = 5
            config = []
            num_normal_trans = int(num_restaurant * normal_ratio)
            num_random_trans = num_restaurant - num_normal_trans
            times = []

            trans_samples1 = np.random.beta(5, 1, size=num_normal_trans)
            trans_samples2 = np.random.beta(1, 5, size=num_normal_trans)
            for i in range(num_normal_trans):
                tmp = []
                x1 = trans_samples1[i]
                x2 = trans_samples2[i]
                # x3 = random.uniform(action_range1[0], action_range1[1])
                # x4 = random.uniform
                # random.seed(v)
                # x1 = random.uniform(action_range1[0], action_range1[1])
                # x2 = random.uniform(action_range2[0], action_range2[1])
                x3 = 1
                x4 = 1
                act_win1 = random.randint(0, 10)
   # 50 weeks per round
                # act_win2 = random.randint(7, 10)
                # act_win3 = random.randint(16,17)

                tmp.append([[x1, 1 - x1], [x2, 1 - x2]])
                tmp.append([[x3, 1 - x3], [x4, 1 - x4]])
                times.append(act_win1)
                config.append(tmp)

            config = np.array(config)
            print(config.shape)

            with open(file_path, 'wb') as f:
                np.save(f, config)

            times = np.array(times)
            with open(file_path2, 'wb') as f:
                np.save(f, times)
            print(times.shape)


def avg_and_std(arr):
    return np.mean(arr), np.std(arr) / math.sqrt(len(arr))


def analysis():
    rel = '''[[[33053.97551525 32411.50182896 32545.43576865 31989.81494376
   33089.05155169 32013.29897386 32284.0461163  32265.27125383
   33616.23538405 32892.14005811 32984.59912158 33250.49086432
   33138.29171817 33137.10669511 32347.53471583 32001.23211977
   33186.66357297 33663.50841984 33601.88412599 32476.86979645]
  [33446.15229741 32905.01093844 33058.39170664 32413.1723224
   33438.50203748 32606.74831141 32749.6495277  32910.21967054
   33953.69397101 33381.79286784 33528.46583236 33689.67428269
   33536.36602517 33473.19891488 32692.15263426 32505.11483002
   33650.79180149 34063.78147845 33888.79579065 33089.8971879 ]
  [34171.89177532 33579.93877104 33813.88226084 33080.65027877
   34111.45847768 33194.18267576 33441.62928824 33458.3445443
   34843.38497958 34179.32670123 34257.45870011 34523.84656845
   34182.37503007 34213.23960035 33567.31483451 33388.65489404
   34380.23268626 34821.1029494  34617.09872915 33646.37629652]
  [35378.18581632 34802.37103378 35003.42083136 34372.84263543
   35357.04486717 34291.48680441 34752.33927871 34807.63684063
   35961.21707935 35200.69377015 35346.87851544 35550.76660853
   35563.01898789 35285.0899008  34635.0930682  34488.02984309
   35455.85434938 35976.90246657 35787.33516577 34964.57018648]
  [36064.510491   35609.81112893 35703.60574375 35060.2041559
   36124.40066336 35180.83125208 35373.32136496 35577.80989217
   36598.40248623 36052.69068548 36125.14978125 36261.98830106
   36204.79431243 36063.42263208 35284.35430151 35086.97598325
   36117.40770666 36640.02108695 36440.59737437 35680.0665224 ]]

 [[32398.73818671 31842.47745534 31944.60475757 31373.13595016
   32375.85848256 31432.04632688 31635.66579756 31679.46853431
   32941.22840455 32325.35898114 32435.96629604 32641.92471201
   32482.11781098 32562.81210073 31705.51262756 31439.02049504
   32516.5276157  33043.52018771 32891.46792626 31885.63560752]
  [32430.17833642 31870.59801343 31981.68562663 31384.7896109
   32381.98689418 31465.371545   31653.01335004 31710.14287522
   32966.50444941 32358.65491438 32461.26085073 32688.93284293
   32506.50768797 32601.64818576 31721.14031285 31474.85451751
   32561.10700403 33094.12052833 32914.79840249 31928.15148314]
  [32501.67234287 31936.57612168 32020.83680954 31435.14974263
   32451.35439394 31530.34154144 31708.39596726 31755.76877111
   33020.81519583 32425.49146593 32537.20332176 32693.64580181
   32571.20354124 32632.96724521 31775.16710164 31557.43183919
   32586.02745099 33117.9740454  32968.2443447  31977.89627606]
  [32498.12231694 31950.60673242 32085.12141192 31519.64532489
   32507.41188428 31566.86565462 31800.06738359 31843.21478764
   33073.93983869 32465.89069914 32572.27968447 32784.82282612
   32596.36607453 32728.35611081 31812.47953845 31595.1107584
   32659.56915468 33165.92687066 33019.98881859 32004.81304422]
  [32577.65155104 32037.00386805 32127.72746593 31553.98783067
   32546.04871657 31613.85842501 31808.90556683 31834.15210113
   33113.09633116 32519.40405429 32622.05074211 32820.24282513
   32647.18716904 32714.88197103 31903.01154318 31669.26785316
   32706.22299412 33189.12582825 33101.62277792 32089.97009196]]

 [[32705.72299624 32166.82126327 32265.28933965 31698.41389062
   32690.22573632 31759.27738558 31941.81920616 32011.33960424
   33228.26119179 32665.57288496 32770.77528504 32939.52053788
   32807.23105585 32855.25193514 32002.60980164 31762.29366962
   32841.93272319 33366.5890857  33205.78037917 32218.92872709]
  [32990.65016967 32457.43097109 32554.25995531 31994.61513266
   32991.68064861 32069.99949239 32255.80440637 32322.47928432
   33537.03423602 32973.95442784 33072.83269671 33241.84726663
   33115.05813253 33141.12340881 32300.40638839 32063.03062078
   33126.80380487 33646.68384987 33498.38304509 32516.38254694]
  [33414.54438925 32895.19085893 32977.87610074 32410.67550426
   33402.88725649 32505.31584777 32698.30299654 32751.04299363
   33948.32832257 33393.15432919 33471.61463308 33657.70382649
   33530.33581637 33550.98807936 32720.73404156 32464.5971979
   33502.46707174 34041.80087793 33904.14227995 32949.56894291]
  [33662.32388698 33173.55717705 33231.22571564 32668.81212485
   33646.6577473  32771.11281886 32957.85165666 33005.99976011
   34188.98331929 33647.65052539 33705.62195252 33898.86790312
   33765.47596978 33806.80190734 32974.60704279 32706.81054492
   33763.9516946  34282.63876801 34144.32725888 33194.48975875]
  [33770.13868413 33287.98529448 33331.15716206 32785.45620863
   33754.73265364 32884.46123133 33078.71560775 33125.03042462
   34291.25683465 33733.87516004 33815.19525302 33988.39526114
   33853.13760979 33919.75666884 33076.21854892 32828.02705366
   33881.01875166 34383.70268966 34248.17459041 33311.88450861]]

 [[32613.54256458 32059.16110831 32155.24453516 31561.01407383
   32569.57281298 31632.57282364 31828.16553283 31890.63208275
   33132.2459752  32540.33737427 32643.47582529 32845.40535091
   32703.69217157 32748.43410824 31903.83745995 31639.91709587
   32734.00855101 33238.16363494 33091.12942318 32100.47754389]
  [32841.32598747 32293.73456827 32376.60292078 31784.78638953
   32789.61181251 31851.12507425 32052.74215134 32102.18319104
   33359.35536241 32761.07902076 32866.80249172 33066.12532931
   32920.57295659 32963.85318354 32118.78243754 31873.37287064
   32961.07862517 33460.8397416  33319.74033772 32327.52682904]
  [33227.07813498 32693.69250221 32765.90183101 32184.49857166
   33196.84756528 32241.64601634 32464.16777299 32516.07989015
   33770.49648921 33182.78288774 33227.40720928 33470.03468467
   33316.85987512 33366.13742558 32519.10692523 32258.80280324
   33340.805015   33830.0516835  33688.48010343 32724.24875853]
  [33489.99359119 32989.67741883 33047.84906388 32477.9603969
   33456.9190282  32557.29468424 32780.20537485 32824.36728973
   34037.08901805 33461.58825204 33505.40127546 33758.9758419
   33606.77404485 33655.98181769 32778.62568805 32523.14979034
   33626.72583145 34081.16833607 33982.00330116 33015.71537656]
  [33676.64587265 33182.55814554 33244.68889952 32679.14462262
   33647.89338184 32769.25259989 32986.90760419 33020.70093855
   34200.63547366 33636.25490902 33703.01439986 33892.25968258
   33776.69842757 33830.50408638 32979.77844744 32728.59810473
   33780.81791797 34273.05018317 34161.10674466 33209.37415377]]

 [[32524.74358288 31996.79090441 32094.85627329 31506.79209011
   32506.02797171 31570.8514474  31792.26436939 31814.78596819
   33053.25176565 32490.56534261 32623.51478718 32781.25152653
   32612.71653369 32694.07761592 31825.9638211  31581.80087022
   32669.86001674 33170.40343488 33011.83512687 32022.50653861]
  [32702.37359434 32176.3282156  32274.95333499 31676.68639933
   32674.7894675  31762.87697873 31984.80586343 31989.03005876
   33222.9939829  32649.99686609 32767.20755323 32944.47970896
   32755.14502337 32861.01334923 31993.77545474 31768.46733692
   32840.2935096  33322.86403423 33168.90182609 32205.90881347]
  [33051.8572966  32516.45749611 32632.80624878 32011.64765181
   33024.67224303 32103.7930154  32303.30109982 32334.75918732
   33559.27503975 32995.27759098 33107.76353111 33273.41335848
   33098.34677207 33194.51066037 32310.35282401 32100.04663918
   33168.69680672 33613.71864458 33491.43361905 32557.55405886]
  [33358.87657022 32866.24064548 32929.30465827 32368.91317367
   33377.34935503 32457.23567393 32631.52173843 32693.64082937
   33885.24756168 33322.19191116 33413.88570928 33595.10878511
   33451.72357621 33526.72710608 32674.19581814 32442.57145537
   33491.03696315 33996.93969429 33805.99643407 32906.59796702]
  [33698.87138973 33201.69998535 33265.57034937 32700.94117988
   33680.05155169 32807.33673434 32967.70958601 33016.76201573
   34201.61763854 33655.04745825 33749.8375756  33925.15546625
   33763.03938075 33845.90912186 33001.06961588 32754.34177441
   33821.38212995 34305.02457755 34165.88033338 33249.14495844]]

 [[32444.73708153 31874.40617628 31983.30391869 31395.73381495
   32402.8761522  31453.0950078  31648.00005716 31730.91148701
   32967.89020265 32368.88458993 32480.52501384 32688.91052171
   32520.88588964 32588.60636634 31746.64307538 31470.32680641
   32562.66745261 33073.40626277 32924.16002847 31929.23661135]
  [32684.49724564 32115.68500853 32212.85043844 31599.59328546
   32656.67911819 31706.8413283  31840.49623036 31965.71137516
   33197.40735905 32614.55349349 32732.05481954 32890.94194493
   32730.13364279 32815.03012175 31916.36704328 31712.79502028
   32721.65353593 33289.11719633 33143.99535766 32176.72898244]
  [32957.73738535 32429.60465848 32512.14924814 31854.76823962
   32902.84692254 32085.46130092 32164.95445658 32320.96383914
   33531.76463197 32830.2528888  33066.83067557 33273.65260112
   33155.33097359 33112.89973767 32278.70681547 31992.70470865
   33031.15523163 33648.84875438 33450.98740681 32537.22841378]
  [33117.02282051 32735.99184224 32763.90076702 32189.8676032
   33217.88269106 32319.81442386 32333.32778002 32439.51434046
   33712.65724712 33132.49707001 33325.29532184 33374.78800546
   33287.39656227 33295.73941985 32413.59088752 32217.73958334
   33225.67742491 33862.56201465 33684.18092777 32639.41939349]
  [33239.78495437 32758.69355505 32780.06983061 32206.1302759
   33222.26926765 32353.7673671  32510.98103469 32586.95028668
   33749.78594753 33208.54038085 33328.95642507 33472.68030122
   33373.67483297 33366.99042462 32486.48622382 32343.95120188
   33311.40828977 33879.14447636 33714.80549999 32778.13983079]]

 [[32704.50166106 32166.31356997 32264.14608601 31696.68009332
   32689.66426945 31758.12545044 31941.28351391 32009.3935608
   33227.25671775 32665.27479605 32770.23669553 32938.44763019
   32806.74222501 32854.72011489 32001.99556464 31760.28524454
   32841.51589838 33366.32602055 33204.96070562 32217.71109222]
  [32987.78516474 32455.54677701 32551.84325682 31991.12407268
   32988.92031459 32066.08290543 32253.674612   32318.17383026
   33532.78475357 32971.99758979 33070.28361259 33238.68516603
   33112.98834543 33138.83722719 32297.66279014 32058.80716471
   33125.01334623 33644.8780556  33494.9242323  32512.45903837]
  [33402.72841982 32888.0065577  32969.01820473 32398.2702592
   33394.58689108 32492.70354997 32687.7645284  32738.99346399
   33935.50180087 33387.8979667  33462.61363106 33643.87951845
   33520.45679027 33540.70338806 32709.92945087 32457.76235717
   33495.38198458 34032.97392317 33891.76296571 32936.44260034]
  [33661.55743513 33163.56728272 33223.23416438 32654.203783
   33638.46907794 32761.1256703  32951.92336345 33002.69660024
   34187.97952481 33641.02075415 33701.18161446 33895.09945885
   33759.53856779 33801.60810792 32966.74418405 32708.1094558
   33748.73515447 34272.39494174 34140.55528506 33194.62403057]
  [33791.63532843 33294.98272434 33344.85321619 32800.51978814
   33766.84244588 32907.56302951 33098.50295614 33143.4052024
   34315.00804322 33751.08452887 33833.84511534 34010.31310067
   33886.83884141 33935.80990034 33097.06631778 32854.02467458
   33885.05029933 34398.81951581 34264.00604337 33327.39823876]]]
'''
    # arr = [[[33053.97551525, 32411.50182896, 32545.43576865, 31989.81494376, 33089.05155169, 32013.29897386,
    #          32284.0461163, 32265.27125383, 33616.23538405, 32892.14005811, 32984.59912158, 33250.49086432,
    #          33138.29171817, 33137.10669511, 32347.53471583, 32001.23211977, 33186.66357297, 33663.50841984,
    #          33601.88412599, 32476.86979645],
    #         [33446.15229741, 32905.01093844, 33058.39170664, 32413.1723224, 33438.50203748, 32606.74831141,
    #          32749.6495277, 32910.21967054, 33953.69397101, 33381.79286784, 33528.46583236, 33689.67428269,
    #          33536.36602517, 33473.19891488, 32692.15263426, 32505.11483002, 33650.79180149, 34063.78147845,
    #          33888.79579065, 33089.8971879, ],
    #         [34171.89177532, 33579.93877104, 33813.88226084, 33080.65027877, 34111.45847768, 33194.18267576,
    #          33441.62928824, 33458.3445443, 34843.38497958, 34179.32670123, 34257.45870011, 34523.84656845,
    #          34182.37503007, 34213.23960035, 33567.31483451, 33388.65489404, 34380.23268626, 34821.1029494,
    #          34617.09872915, 33646.37629652],
    #         [35378.18581632, 34802.37103378, 35003.42083136, 34372.84263543, 35357.04486717, 34291.48680441,
    #          34752.33927871, 34807.63684063, 35961.21707935, 35200.69377015, 35346.87851544, 35550.76660853,
    #          35563.01898789, 35285.0899008, 34635.0930682, 34488.02984309, 35455.85434938, 35976.90246657,
    #          35787.33516577, 34964.57018648],
    #         [36064.510491, 35609.81112893, 35703.60574375, 35060.2041559, 36124.40066336, 35180.83125208,
    #          35373.32136496, 35577.80989217, 36598.40248623, 36052.69068548, 36125.14978125, 36261.98830106,
    #          36204.79431243, 36063.42263208, 35284.35430151, 35086.97598325, 36117.40770666, 36640.02108695,
    #          36440.59737437, 35680.0665224, ]], [
    #            [32398.73818671, 31842.47745534, 31944.60475757, 31373.13595016, 32375.85848256, 31432.04632688,
    #             31635.66579756, 31679.46853431, 32941.22840455, 32325.35898114, 32435.96629604, 32641.92471201,
    #             32482.11781098, 32562.81210073, 31705.51262756, 31439.02049504, 32516.5276157, 33043.52018771,
    #             32891.46792626, 31885.63560752],
    #            [32430.17833642, 31870.59801343, 31981.68562663, 31384.7896109, 32381.98689418, 31465.371545,
    #             31653.01335004, 31710.14287522, 32966.50444941, 32358.65491438, 32461.26085073, 32688.93284293,
    #             32506.50768797, 32601.64818576, 31721.14031285, 31474.85451751, 32561.10700403, 33094.12052833,
    #             32914.79840249, 31928.15148314],
    #            [32501.67234287, 31936.57612168, 32020.83680954, 31435.14974263, 32451.35439394, 31530.34154144,
    #             31708.39596726, 31755.76877111, 33020.81519583, 32425.49146593, 32537.20332176, 32693.64580181,
    #             32571.20354124, 32632.96724521, 31775.16710164, 31557.43183919, 32586.02745099, 33117.9740454,
    #             32968.2443447, 31977.89627606],
    #            [32498.12231694, 31950.60673242, 32085.12141192, 31519.64532489, 32507.41188428, 31566.86565462,
    #             31800.06738359, 31843.21478764, 33073.93983869, 32465.89069914, 32572.27968447, 32784.82282612,
    #             32596.36607453, 32728.35611081, 31812.47953845, 31595.1107584, 32659.56915468, 33165.92687066,
    #             33019.98881859, 32004.81304422],
    #            [32577.65155104, 32037.00386805, 32127.72746593, 31553.98783067, 32546.04871657, 31613.85842501,
    #             31808.90556683, 31834.15210113, 33113.09633116, 32519.40405429, 32622.05074211, 32820.24282513,
    #             32647.18716904, 32714.88197103, 31903.01154318, 31669.26785316, 32706.22299412, 33189.12582825,
    #             33101.62277792, 32089.97009196]], [
    #            [32705.72299624, 32166.82126327, 32265.28933965, 31698.41389062, 32690.22573632, 31759.27738558,
    #             31941.81920616, 32011.33960424, 33228.26119179, 32665.57288496, 32770.77528504, 32939.52053788,
    #             32807.23105585, 32855.25193514, 32002.60980164, 31762.29366962, 32841.93272319, 33366.5890857,
    #             33205.78037917, 32218.92872709],
    #            [32990.65016967, 32457.43097109, 32554.25995531, 31994.61513266, 32991.68064861, 32069.99949239,
    #             32255.80440637, 32322.47928432, 33537.03423602, 32973.95442784, 33072.83269671, 33241.84726663,
    #             33115.05813253, 33141.12340881, 32300.40638839, 32063.03062078, 33126.80380487, 33646.68384987,
    #             33498.38304509, 32516.38254694],
    #            [33414.54438925, 32895.19085893, 32977.87610074, 32410.67550426, 33402.88725649, 32505.31584777,
    #             32698.30299654, 32751.04299363, 33948.32832257, 33393.15432919, 33471.61463308, 33657.70382649,
    #             33530.33581637, 33550.98807936, 32720.73404156, 32464.5971979, 33502.46707174, 34041.80087793,
    #             33904.14227995, 32949.56894291],
    #            [33662.32388698, 33173.55717705, 33231.22571564, 32668.81212485, 33646.6577473, 32771.11281886,
    #             32957.85165666, 33005.99976011, 34188.98331929, 33647.65052539, 33705.62195252, 33898.86790312,
    #             33765.47596978, 33806.80190734, 32974.60704279, 32706.81054492, 33763.9516946, 34282.63876801,
    #             34144.32725888, 33194.48975875],
    #            [33770.13868413, 33287.98529448, 33331.15716206, 32785.45620863, 33754.73265364, 32884.46123133,
    #             33078.71560775, 33125.03042462, 34291.25683465, 33733.87516004, 33815.19525302, 33988.39526114,
    #             33853.13760979, 33919.75666884, 33076.21854892, 32828.02705366, 33881.01875166, 34383.70268966,
    #             34248.17459041, 33311.88450861]], [
    #            [32613.54256458, 32059.16110831, 32155.24453516, 31561.01407383, 32569.57281298, 31632.57282364,
    #             31828.16553283, 31890.63208275, 33132.2459752, 32540.33737427, 32643.47582529, 32845.40535091,
    #             32703.69217157, 32748.43410824, 31903.83745995, 31639.91709587, 32734.00855101, 33238.16363494,
    #             33091.12942318, 32100.47754389],
    #            [32841.32598747, 32293.73456827, 32376.60292078, 31784.78638953, 32789.61181251, 31851.12507425,
    #             32052.74215134, 32102.18319104, 33359.35536241, 32761.07902076, 32866.80249172, 33066.12532931,
    #             32920.57295659, 32963.85318354, 32118.78243754, 31873.37287064, 32961.07862517, 33460.8397416,
    #             33319.74033772, 32327.52682904],
    #            [33227.07813498, 32693.69250221, 32765.90183101, 32184.49857166, 33196.84756528, 32241.64601634,
    #             32464.16777299, 32516.07989015, 33770.49648921, 33182.78288774, 33227.40720928, 33470.03468467,
    #             33316.85987512, 33366.13742558, 32519.10692523, 32258.80280324, 33340.805015, 33830.0516835,
    #             33688.48010343, 32724.24875853],
    #            [33489.99359119, 32989.67741883, 33047.84906388, 32477.9603969, 33456.9190282, 32557.29468424,
    #             32780.20537485, 32824.36728973, 34037.08901805, 33461.58825204, 33505.40127546, 33758.9758419,
    #             33606.77404485, 33655.98181769, 32778.62568805, 32523.14979034, 33626.72583145, 34081.16833607,
    #             33982.00330116, 33015.71537656],
    #            [33676.64587265, 33182.55814554, 33244.68889952, 32679.14462262, 33647.89338184, 32769.25259989,
    #             32986.90760419, 33020.70093855, 34200.63547366, 33636.25490902, 33703.01439986, 33892.25968258,
    #             33776.69842757, 33830.50408638, 32979.77844744, 32728.59810473, 33780.81791797, 34273.05018317,
    #             34161.10674466, 33209.37415377]], [
    #            [32524.74358288, 31996.79090441, 32094.85627329, 31506.79209011, 32506.02797171, 31570.8514474,
    #             31792.26436939, 31814.78596819, 33053.25176565, 32490.56534261, 32623.51478718, 32781.25152653,
    #             32612.71653369, 32694.07761592, 31825.9638211, 31581.80087022, 32669.86001674, 33170.40343488,
    #             33011.83512687, 32022.50653861],
    #            [32702.37359434, 32176.3282156, 32274.95333499, 31676.68639933, 32674.7894675, 31762.87697873,
    #             31984.80586343, 31989.03005876, 33222.9939829, 32649.99686609, 32767.20755323, 32944.47970896,
    #             32755.14502337, 32861.01334923, 31993.77545474, 31768.46733692, 32840.2935096, 33322.86403423,
    #             33168.90182609, 32205.90881347],
    #            [33051.8572966, 32516.45749611, 32632.80624878, 32011.64765181, 33024.67224303, 32103.7930154,
    #             32303.30109982, 32334.75918732, 33559.27503975, 32995.27759098, 33107.76353111, 33273.41335848,
    #             33098.34677207, 33194.51066037, 32310.35282401, 32100.04663918, 33168.69680672, 33613.71864458,
    #             33491.43361905, 32557.55405886],
    #            [33358.87657022, 32866.24064548, 32929.30465827, 32368.91317367, 33377.34935503, 32457.23567393,
    #             32631.52173843, 32693.64082937, 33885.24756168, 33322.19191116, 33413.88570928, 33595.10878511,
    #             33451.72357621, 33526.72710608, 32674.19581814, 32442.57145537, 33491.03696315, 33996.93969429,
    #             33805.99643407, 32906.59796702],
    #            [33698.87138973, 33201.69998535, 33265.57034937, 32700.94117988, 33680.05155169, 32807.33673434,
    #             32967.70958601, 33016.76201573, 34201.61763854, 33655.04745825, 33749.8375756, 33925.15546625,
    #             33763.03938075, 33845.90912186, 33001.06961588, 32754.34177441, 33821.38212995, 34305.02457755,
    #             34165.88033338, 33249.14495844]], [
    #            [32444.73708153, 31874.40617628, 31983.30391869, 31395.73381495, 32402.8761522, 31453.0950078,
    #             31648.00005716, 31730.91148701, 32967.89020265, 32368.88458993, 32480.52501384, 32688.91052171,
    #             32520.88588964, 32588.60636634, 31746.64307538, 31470.32680641, 32562.66745261, 33073.40626277,
    #             32924.16002847, 31929.23661135],
    #            [32684.49724564, 32115.68500853, 32212.85043844, 31599.59328546, 32656.67911819, 31706.8413283,
    #             31840.49623036, 31965.71137516, 33197.40735905, 32614.55349349, 32732.05481954, 32890.94194493,
    #             32730.13364279, 32815.03012175, 31916.36704328, 31712.79502028, 32721.65353593, 33289.11719633,
    #             33143.99535766, 32176.72898244],
    #            [32957.73738535, 32429.60465848, 32512.14924814, 31854.76823962, 32902.84692254, 32085.46130092,
    #             32164.95445658, 32320.96383914, 33531.76463197, 32830.2528888, 33066.83067557, 33273.65260112,
    #             33155.33097359, 33112.89973767, 32278.70681547, 31992.70470865, 33031.15523163, 33648.84875438,
    #             33450.98740681, 32537.22841378],
    #            [33117.02282051, 32735.99184224, 32763.90076702, 32189.8676032, 33217.88269106, 32319.81442386,
    #             32333.32778002, 32439.51434046, 33712.65724712, 33132.49707001, 33325.29532184, 33374.78800546,
    #             33287.39656227, 33295.73941985, 32413.59088752, 32217.73958334, 33225.67742491, 33862.56201465,
    #             33684.18092777, 32639.41939349],
    #            [33239.78495437, 32758.69355505, 32780.06983061, 32206.1302759, 33222.26926765, 32353.7673671,
    #             32510.98103469, 32586.95028668, 33749.78594753, 33208.54038085, 33328.95642507, 33472.68030122,
    #             33373.67483297, 33366.99042462, 32486.48622382, 32343.95120188, 33311.40828977, 33879.14447636,
    #             33714.80549999, 32778.13983079]], [
    #            [32704.50166106, 32166.31356997, 32264.14608601, 31696.68009332, 32689.66426945, 31758.12545044,
    #             31941.28351391, 32009.3935608, 33227.25671775, 32665.27479605, 32770.23669553, 32938.44763019,
    #             32806.74222501, 32854.72011489, 32001.99556464, 31760.28524454, 32841.51589838, 33366.32602055,
    #             33204.96070562, 32217.71109222],
    #            [32987.78516474, 32455.54677701, 32551.84325682, 31991.12407268, 32988.92031459, 32066.08290543,
    #             32253.674612, 32318.17383026, 33532.78475357, 32971.99758979, 33070.28361259, 33238.68516603,
    #             33112.98834543, 33138.83722719, 32297.66279014, 32058.80716471, 33125.01334623, 33644.8780556,
    #             33494.9242323, 32512.45903837],
    #            [33402.72841982, 32888.0065577, 32969.01820473, 32398.2702592, 33394.58689108, 32492.70354997,
    #             32687.7645284, 32738.99346399, 33935.50180087, 33387.8979667, 33462.61363106, 33643.87951845,
    #             33520.45679027, 33540.70338806, 32709.92945087, 32457.76235717, 33495.38198458, 34032.97392317,
    #             33891.76296571, 32936.44260034],
    #            [33661.55743513, 33163.56728272, 33223.23416438, 32654.203783, 33638.46907794, 32761.1256703,
    #             32951.92336345, 33002.69660024, 34187.97952481, 33641.02075415, 33701.18161446, 33895.09945885,
    #             33759.53856779, 33801.60810792, 32966.74418405, 32708.1094558, 33748.73515447, 34272.39494174,
    #             34140.55528506, 33194.62403057],
    #            [33791.63532843, 33294.98272434, 33344.85321619, 32800.51978814, 33766.84244588, 32907.56302951,
    #             33098.50295614, 33143.4052024, 34315.00804322, 33751.08452887, 33833.84511534, 34010.31310067,
    #             33886.83884141, 33935.80990034, 33097.06631778, 32854.02467458, 33885.05029933, 34398.81951581,
    #             34264.00604337, 33327.39823876]]]

    arr = np.load("./result.npy")
    p, b, v = arr.shape
    rel_mean = [[0 for i in range(b)] for j in range(p)]
    rel_stderr = [[0 for i in range(b)] for j in range(p)]
    for i in range(p):
        for j in range(b):
            tmp = arr[i, j, :]
            avg, st = avg_and_std(tmp)
            rel_mean[i][j] = avg
            rel_stderr[i][j] = st
            print(str(avg) + "+-" + str(st), end=",")
        print()

    rel_file = "./rel.npy"
    with open(rel_file, 'wb') as f:
        np.save(f, arr)
    return rel_mean, rel_stderr


def barchart(means, std_errors):
    import numpy as np
    import matplotlib
    matplotlib.use('TkAgg')
    import matplotlib.pyplot as plt

    # Sample data
    groups = ['1%', '3%', '4%', '6%', '8%']

    bottom = np.array(means).min() - 200
    # Set up the bar positions
    bar_width = 0.35
    index = np.arange(0,len(groups)*3, 3)

    # Create the figure and axes
    fig, ax = plt.subplots()

    # Plot the bars with error bars
    policy = ["WIP", "RP", "TCB", "RFP", "TCB_NO_WIN", "IP"]
    for i, mean in enumerate(means):
        ax.bar(index + i * bar_width, mean, bar_width, yerr=std_errors[i], label=policy[i])

    # Set labels and title
    ax.set_xlabel('Budgets')
    ax.set_ylabel('Rewards')
    ax.set_title('Rewards in 260 rounds(5 years)')
    ax.set_xticks(index + bar_width * 7 / 2)
    ax.set_xticklabels(groups)
    ax.legend()

    # Show the plot
    # plt.tight_layout()
    plt.ylim(bottom=bottom)
    plt.show()


if __name__ == '__main__':
    # means, err = analysis()
    # barchart(means, err)
    generate()
    # generate()
